(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1487:function(t,e,n){"use strict";var r=n(9),i=n.n(r),o=n(8),s=n.n(o),a=n(5),u=n.n(a),l=n(21),c=n.n(l),p=function(t){function e(){return t.apply(this,arguments)||this}return s()(e,t),e.prototype.render=function(){return u.a.createElement("p",i()({},this.props,{className:c()("paragraph_text",this.props.className)}),this.props.children)},e}(u.a.Component);e.a=p},1565:function(t,e,n){var r=n(523),i=n(264),o=n(172),s=n(34);t.exports=function(t,e,n){return t=s(t),n=null==n?0:r(o(n),0,t.length),e=i(e),t.slice(n,n+e.length)==e}},1601:function(t,e,n){t.exports=n(1860)},1615:function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r,i=n(2),o=n.n(i),s=n(9),a=n.n(s),u=n(24),l=n.n(u),c=n(6),p=n.n(c),f=n(0),h=n.n(f),d=n(48),g=8;function b(t){var e=t.x,n=t.y;"undefined"!=typeof window&&window.scrollTo(e,n)}function m(t){return r||Object(d.a)("https://static.filestackapi.com/v3/filestack.js").then(function(){return r=function(t){var e=t.getConfig().filepicker,n=e.key,r=e.policy,i=e.signature;if("undefined"==typeof window)throw new Error("Cannot init filestack on server");if(!window.filestack)throw new Error("Filestack package not loaded");return window.filestack.init(n,{policy:r,signature:i})}(t)},function(t){})}function v(t,e,n){return y.apply(this,arguments)}function y(){return(y=p()(o.a.mark(function t(e,n,r){var i,s,u,c,p,f,d,b,m,v,y,w,x;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===r&&(r={}),e){t.next=3;break}throw new Error("Filestack client undefined");case 3:if(i=n.getConfig().filepicker.maxSize,s=h.a.defaults(r,{access:"public",imgType:["image/jpeg","image/png","image/gif","image/tiff","image/bmp","image/x-icon"],location:"s3",maxFiles:1,mode:"pick",multiple:!1,services:["local_file_system","url","googledrive","dropbox","facebook","instagram","flickr","imagesearch"],maxSize:i}),u=s.access,c=s.file,p=s.imgType,f=s.location,d=s.mode,b=s.multiple,m=s.path,v=s.services,y=s.url,w=l()(s,["access","file","imgType","location","mode","multiple","path","services","url"]),b&&w.maxFiles<=1&&(w.maxFiles=g),x={location:f,path:m,access:u},"storeUrl"!==d){t.next=15;break}if(!y||!y.trim().match(/(http:\/\/|https:\/\/)/g)){t.next=12;break}return t.abrupt("return",e.storeURL(y,a()({filename:"md_img.jpg"},x)));case 12:throw new Error("Invalid url");case 13:t.next=22;break;case 15:if("upload"!==d||!c){t.next=21;break}if(c){t.next=18;break}throw new Error("No filename specified");case 18:return t.abrupt("return",e.upload(c,x));case 21:return t.abrupt("return",e.pick(a()({},w,{fromSources:v,accept:p,onFileSelected:function(t){if("image/svg+xml"===t.imgType)throw new Error("Please select an image that is not an SVG");return t.name=t.filename.replace(/[^a-zA-Z0-9.]/g,""),t},storeTo:x})));case 22:case"end":return t.stop()}},t)}))).apply(this,arguments)}function w(t,e){return t.metadata(e,{width:!0,height:!0})}function x(t,e){return k.apply(this,arguments)}function k(){return(k=p()(o.a.mark(function t(e,n){var r,i,s,a,u,c,f,d,g,b,v,y,x,k,_,O,j,E,A;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.successHandler,i=void 0===r?function(t){}:r,s=n.errorHandler,a=void 0===s?function(t){}:s,u=n.fetchDimensions,c=void 0!==u&&u,f=n.options,d=f.path,g=l()(f,["path"]),b=g.onProgress,v=void 0===b?h.a.noop:b,y=m(e),t.next=5,n.mobileRPC({type:"filepicker"});case 5:return x=t.sent,t.next=8,y;case 8:if(k=t.sent,_=x.uri.split("/").slice(-1)[0],O={},(v=v.bind(null,{filename:_,token:O}))({totalPercent:0,totalBytes:0}),j=function(){var t=p()(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!c){t.next=3;break}return t.next=3,Promise.all(e.filesUploaded.map(function(){var t=p()(o.a.mark(function t(e){var n,r,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(k,e.handle);case 2:n=t.sent,r=n.width,i=n.height,e.width=r,e.height=i;case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 3:i(e);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),E=function(t){v({cancelled:!0}),!(101===h.a.get(t,"code"))&&window.Rollbar&&h.a.isObject(t)&&window.Rollbar.error(t,null,{source:"Filepicker"}),a(t)},!x.cancelled){t.next=18;break}return E({code:101}),t.abrupt("return");case 18:return t.prev=18,t.next=21,k.upload(x.base64,{onProgress:v},{filename:_,path:d,access:"public",location:"s3"},O);case 21:return A=t.sent,t.abrupt("return",j({filesUploaded:[A]}));case 25:if(t.prev=25,t.t0=t.catch(18),"Upload cancelled"!==h.a.get(t.t0,"message")){t.next=31;break}v({cancelled:!0}),t.next=32;break;case 31:return t.abrupt("return",E(t.t0));case 32:case"end":return t.stop()}},t,null,[[18,25]])}))).apply(this,arguments)}function _(t,e){return O.apply(this,arguments)}function O(){return(O=p()(o.a.mark(function t(e,n){var r,i,s,a,u,c,f,d,g,y,k,_,O,j,E;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.getConfig().isNativeMobile){t.next=2;break}return t.abrupt("return",x(e,n));case 2:return t.next=4,m(e);case 4:return r=t.sent,i=n.successHandler,s=void 0===i?function(t){}:i,a=n.errorHandler,u=void 0===a?function(t){}:a,c=n.closeHandler,f=void 0===c?h.a.noop:c,d=n.fetchDimensions,g=void 0!==d&&d,y=n.options,k=y.src,delete(_=l()(y,["src"])).onProgress,A=void 0,q=void 0,A=0,q=0,"undefined"!=typeof window&&(A=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,q=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),O={x:A,y:q},_.onClose=function(){f(),setTimeout(function(){b(O)},0)},j=function(){var t=p()(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!g){t.next=3;break}return t.next=3,Promise.all(e.filesUploaded.map(function(){var t=p()(o.a.mark(function t(e){var n,i,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(r,e.handle);case 2:n=t.sent,i=n.width,s=n.height,e.width=i,e.height=s;case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 3:s(e);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),E=function(t){!(101===h.a.get(t,"code"))&&window.Rollbar&&h.a.isObject(t)&&window.Rollbar.error(t,null,{source:"Filepicker",src:k}),u(t)},t.abrupt("return",v(r,e,_).then(j).catch(E));case 12:case"end":return t.stop()}var A,q},t)}))).apply(this,arguments)}},1618:function(t,e,n){"use strict";var r=n(1),i=n.n(r),o=(n(5),n(55));e.a=function(t){var e=t.label,n=void 0===e?"":e,r=t.percent,s=void 0===r?0:r;return i()("div",{className:"progress_status_bar__container"},void 0,n&&i()("label",{},void 0,n),n&&i()(o.a,{size:5}),i()("div",{className:"progress_status_bar--background"},void 0,i()("div",{className:"progress_status_bar--main",style:{width:s+"%",transition:"width 0.3s ease-out"}})))}},1619:function(t,e,n){"use strict";var r=n(60),i=n(3),o=n(89),s=n.n(o);e.a=function(t,e){return void 0===e&&(e={allowMultiple:!0}),Object(r.compose)(Object(r.withState)("partialUploads","updateUploadProgress",Object(i.Map)()),Object(r.withHandlers)({handleUploadProgress:function(t){var n=t.updateUploadProgress,r=t.partialUploads;return function(t,i){var o=t.filename,a=t.token;if(i.cancelled)n(function(t){return t.remove(o)});else{r.has(o)||e.allowMultiple||r.forEach(function(t){s()(t.cancel)&&t.cancel()});var u=i.totalPercent;n(function(t){return t.set(o,{percent:u,cancel:a.cancel})}),100===u&&setTimeout(function(){return n(function(t){return t.remove(o)})},500)}}}}))(t)}},1667:function(t,e,n){"use strict";n.d(e,"a",function(){return j});var r,i,o,s=n(1),a=n.n(s),u=n(9),l=n.n(u),c=n(8),p=n.n(c),f=n(13),h=n.n(f),d=n(7),g=n.n(d),b=n(5),m=n.n(b),v=n(14),y=n(0),w=n.n(y),x=n(1615),k=n(1487),_=n(74),O=n(302),j=(o=i=function(t){function e(){return t.apply(this,arguments)||this}p()(e,t);var n=e.prototype;return n.initializeFilestack=function(){this.props.trackingHandler(),this.context.executeAction(x.a,{mobileRPC:this.context.mobileRPC,successHandler:this.fileStackSuccessCallback,closeHandler:this.props.fileStackCloseCallback,fetchDimensions:this.props.fetchDimensions,options:l()({multiple:this.props.multiple,src:"UploadFileIcon",path:this.props.fileImageType},this.props.options)})},n.componentDidMount=function(){this.props.autoUpload&&this.initializeFilestack()},n.fileStackSuccessCallback=function(t){t&&t.filesUploaded.length>0&&(t.filesUploaded.forEach(function(t,e,n){t.fullUrl=this.context.getImagesRootPath()+t.key},this),this.props.addImageToCommentHandler(t.filesUploaded))},n.render=function(){return a()(_.a,{className:"upload_image_wrapper atomic_styles__container",alignItems:"center",flexWrap:"nowrap",flexGrow:0,onClick:this.initializeFilestack,style:{color:this.props.color}},void 0,a()("i",{className:"upload_image_icon icon-picture"}),a()(O.a,{size:5}),a()(k.a,{className:"upload_image__subtext"},void 0,"Add Image"))},e}(m.a.Component),i.contextTypes={getImagesRootPath:g.a.func,executeAction:g.a.func,mobileRPC:g.a.func},i.defaultProps={multiple:!1,autoUpload:!1,trackingHandler:w.a.noop,fetchDimensions:!1,options:{}},r=o,h()(r.prototype,"initializeFilestack",[v.autobind],Object.getOwnPropertyDescriptor(r.prototype,"initializeFilestack"),r.prototype),h()(r.prototype,"fileStackSuccessCallback",[v.autobind],Object.getOwnPropertyDescriptor(r.prototype,"fileStackSuccessCallback"),r.prototype),r)},1729:function(t,e,n){"use strict";var r=n(1),i=n.n(r),o=n(9),s=n.n(o),a=n(2),u=n.n(a),l=n(6),c=n.n(l),p=n(1518),f=n.n(p),h=n(8),d=n.n(h),g=n(13),b=n.n(g),m=n(27),v=n.n(m),y=n(7),w=n.n(y),x=n(5),k=n.n(x),_=n(14),O=n(491),j=n.n(O),E=n(56),A=n.n(E),q=n(89),S=n.n(q),C=n(41),T=n.n(C),N=n(75),U=n.n(N),P=n(221),L=n.n(P),I=n(500),M=n.n(I),z=n(4),D=n(21),F=n.n(D),R=n(82),V=n(1615),H=n(81),Q=n(26),W=n(15),B=n(24),G=n.n(B),X=n(69),Y=n.n(X),J=n(833),Z=n.n(J),$=n(18),K=n.n($),tt=n(219),et=n.n(tt),nt=n(1861),rt=n.n(nt),it=n(36),ot=n.n(it),st=n(1863),at=n.n(st),ut=n(92),lt=n(1719);function ct(){return pt.apply(this,arguments)}function pt(){return(pt=c()(u.a.mark(function t(){var e,r,o,a,l,c,p,f,h,g,b,m,v,y,w,x,k,_,O,j,E,A,q,S,C,T,N;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"!=typeof window){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,z.Fn.retry(function(){return Promise.all([n.e("quill").then(n.t.bind(null,1823,7)),n.e("quill").then(n.t.bind(null,2101,7)),n.e("quill").then(n.t.bind(null,2102,7))])},{limit:3});case 5:o=t.sent,e=o[0].default,r=o[1].default,t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(2),Object(ut.e)(t.t0),t.abrupt("return");case 14:return e.register("modules/magicUrl",r,!0),(a=e.import("blots/block")).tagName="DIV",e.register(a,!0),l=e.import("blots/embed"),(c=function(t){function e(){return t.apply(this,arguments)||this}return d()(e,t),e}(l)).blotName="hr",c.tagName="hr",e.register(c,!0),p=e.import("formats/link"),f=p.sanitize,p.sanitize=function(t){return/^(https?|mailto):/.test(t)||(t="http://"+t),t=encodeURI(t),f.call(this,t)},e.register(p,!0),(h=e.import("formats/code-block")).tagName="CODE",e.register(h,!0),g=e.import("ui/icons"),b=function(t){return'<i class="icon material-icons">'+t+"</i>"},g.clean=b("format_clear"),g.link=b("link"),g.video=b("video_library"),g.hr=b("remove"),g.size=b("text_fields"),g.list.bullet=b("format_list_bulleted"),g.list.ordered=b("format_list_numbered"),g.indent[-1]=b("format_indent_decrease"),g.indent["+1"]=b("format_indent_increase"),g.align[""]=b("format_align_left"),g.align.center=b("format_align_center"),g.align.right=b("format_align_right"),m=e.import("themes/snow"),v=e.import("ui/icon-picker"),y=e.import("ui/picker"),w=[!1,"center","right","justify"],x=["caption",!1,"subtitle","title","big","huge"],k=["ordered","bullet"],_=["-1","+1"],O=function(t){function e(){return t.apply(this,arguments)||this}return d()(e,t),e.prototype.buildPickers=function(t,e){var n=this;function r(t,e,n){void 0===n&&(n=!1),e.forEach(function(e){var r=document.createElement("option");e===n?r.setAttribute("selected","selected"):r.setAttribute("value",e),t.appendChild(r)})}this.pickers=Array.from(t).filter(Boolean).map(function(t){return t.classList.contains("ql-align")?(null===t.querySelector("option")&&r(t,w),new v(t,e.align)):t.classList.contains("ql-overflow")?(null===t.querySelector("option")&&r(t,["blockquote","code-block"].concat(k,_,["hr","link","video"])),new v(t,s()({},e.list,e.indent,U()(e,["blockquote","code-block","hr","link","video"])))):(null===t.querySelector("option")&&t.classList.contains("ql-format")&&r(t,x),new y(t))});this.quill.on("editor-change",function(){n.pickers.forEach(function(t){t.update()})})},e}(m),e.register("themes/massdrop",O,!0),j=e.import("modules/toolbar"),Object.assign(j.DEFAULTS.handlers,{overflow:function(t){var e;switch(t){case"ordered":case"bullet":e="list";break;case"-1":case"+1":e="indent";break;default:e=t}this.handlers[e].call(this,t)}}),e.register(j,!0),E=e.import("parchment"),A=new E.Attributor.Class("format","ql-format",{scope:E.Scope.INLINE,whitelist:x}),e.register("attributors/class/format",A,!0),e.register("formats/format",A,!0),(q=function(t){function e(){return t.apply(this,arguments)||this}return d()(e,t),e.create=function(t){this._imageData=t;var e=t.src,n=t.transform,r=void 0===n?{}:n,o=r.w,s=r.h,a=G()(r,["w","h"]),u=document.createElement("div");return u.setAttribute("class","carousel_image__wrapper"),Y.a.render(i()(lt.a,{src:e,transform:a,width:o,height:s,onDeleteImage:function(){return u.parentNode.removeChild(u)}}),u),u},e.value=function(t){var e="IMG"===K()(t,"nodeName")?t:t.querySelector("img");if(!e)return this._imageData;var n=e.getAttribute("src").split("?"),r=n[0],i=n[1];return{src:r,transform:ot.a.parse(i)}},e}(l)).blotName="image",q.tagName="IMG",e.register(q,!0),S=e.import("formats/video"),C=function(t){function e(){return t.apply(this,arguments)||this}return d()(e,t),e.create=function(e){var n=document.createElement("div");n.setAttribute("class","video_container");var r=t.create.call(this,e);return n.appendChild(r),n},e.value=function(e){var n="IFRAME"===K()(e,"nodeName")?e:e.firstChild;return t.value.call(this,n)},e}(S),e.register(C,!0),T=e.import("modules/clipboard"),N=function(t){function n(){return t.apply(this,arguments)||this}return d()(n,t),n.prototype.onPaste=function(t){var n=this;if(!t.defaultPrevented&&this.quill.isEnabled()){var r=this.quill.getSelection(),i=(new at.a).retain(r.index),o=window.scrollX||window.pageXOffset,s=window.scrollY||window.pageYOffset;this.container.focus(),window.scrollTo(o,s),this.quill.selection.update(e.sources.SILENT),setTimeout(function(){i=i.concat(n.convert()).delete(r.length),n.quill.updateContents(i,e.sources.USER),n.quill.setSelection(i.length()-r.length,e.sources.USER),window.scrollTo(o,s)},1)}},n}(T),e.register("modules/clipboard",N,!0),t.abrupt("return",e);case 71:case"end":return t.stop()}},t,null,[[2,10]])}))).apply(this,arguments)}var ft,ht,dt,gt={caption:"12px",subtitle:"18px",title:"24px",big:"48px",huge:"64px"},bt=function(t,e){var n=K()(t,"style.fontSize");if(!n)return e;var r=Z()(gt,function(t){return t===n});return r?e.compose((new at.a).retain(e.length(),{format:r})):e},mt=et()(ct),vt=function(){function t(t,e){this.container=t,this.options=e,this.reinitialize=this.initialize.bind(this,ct),rt()(this.options,"modules.clipboard.matchers",function(t){return(t||[]).concat([[Node.ELEMENT_NODE,bt]])})}return t.prototype.initialize=function(){var t=c()(u.a.mark(function t(e){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=mt),t.next=3,e();case 3:return n=t.sent,t.abrupt("return",n?new n(this.container,this.options):null);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),t}(),yt=n(233),wt=32,xt=[].concat(v()(W.ab),v()(W.bb),["clean","overflow"]),kt=(dt=ht=function(t){function e(e){var n;return(n=t.call(this,e)||this).scrollIntoView=M()(function(t,e){var r=n._quill.getSelection();if(r){var i=n.context.getUserAgent(),o=i.isIphone,s=i.isIOS,a=i.isMobile,u=n._quill.getBounds(r.index,r.length).top,l=n._editor.getBoundingClientRect().top+u,c={width:window.innerWidth||window.document.documentElement.clientWidth,height:window.innerHeight||window.document.documentElement.clientHeight},p=c.height>c.width;if(o||a&&"selection-change"===t){var f=p?.45:.2;c.height*=f}else if(s){var h=p?.75:.55;c.height*=h}var d=a?10:W.Q,g=.8*c.height,b=n.props.scrollOffset,m=n.props.disableToolbar?b:b+wt;if(l>g||l<d){var v=l-(d+m);yt.animateScroll.scrollMore(v,{smooth:!0,duration:"user"===e?Math.min(Math.abs(2*v),500):0})}}},500),n.state={loaded:!1},n.focus=n.handleFocus.bind(f()(n),!0),n.blur=n.handleFocus.bind(f()(n),!1),n}d()(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=c()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initializeQuill();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),n.reinitializeQuill=function(){var t=c()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initializeQuill(!1);case 2:this.focus();case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),n.initializeQuill=function(){var t=c()(u.a.mark(function t(e){var n,r,i,o=this;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e&&(e=!0),!this._editor){t.next=21;break}if(n={magicUrl:!0,mention:{allowedChars:/^[A-Za-z0-9._-]*$/,isolateCharacter:!0,source:j()(function(){var t=c()(u.a.mark(function t(e,n){var r,i,s;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,o.context.unsafeExecuteAction(H.a.findUserSuggestions,{query:e,discussionId:o.props.discussionId});case 5:i=t.sent,s=i[0].hits,r=void 0===s?[]:s,t.next=12;break;case 10:t.prev=10,t.t0=t.catch(2);case 12:r&&r.length>0&&n(r.map(function(t){return{id:t.uid,value:t.username}}),e);case 13:case"end":return t.stop()}},t,null,[[2,10]])}));return function(e,n){return t.apply(this,arguments)}}(),250)}},A()(this.props.bindings)||(n.keyboard={bindings:this.props.bindings}),n.toolbar=!(this.props.disableToolbar||this.props.plainText||A()(this.props.toolbarOptions))&&{container:this.props.toolbarOptions,handlers:{image:function(){o.blur(),o.initializeFilestack()},hr:this.insertEmbedAtSelection.bind(this,"hr",!0),video:function(){return o.context.executeAction(Q.c,{name:"addVideo",options:{addVideo:o.onVideoUpload}})}}},r=s()({},U()(this.props,["placeholder","className","formats"]),{modules:n,theme:"massdrop"}),this.props.plainText&&(r.formats=[]),i=new vt(this._editor,r),!e){t.next=14;break}return t.next=11,i.initialize();case 11:t.t0=t.sent,t.next=17;break;case 14:return t.next=16,i.reinitialize();case 16:t.t0=t.sent;case 17:if(this._quill=t.t0,this._quill){t.next=20;break}return t.abrupt("return");case 20:this.setState({loaded:!0},function(){o.props.content&&o._quill.setContents(o.props.content),o._quill.on("selection-change",o.handleSelectionChange),o._quill.on("text-change",function(t,e,n){o.scrollIntoView("text-change",n),o.props.onTextChange(t,e,n)}),o.props.isEditing&&o.focus();var t=o._quill.theme.tooltip;if(t&&t.root){var e=t.root.querySelector("input[data-link]");e&&(e.dataset.link=z.Constants.DOMAIN_URL)}var n="string"==typeof o.props.toolbarOptions?document.querySelector(o.props.toolbarOptions):o._editor.querySelector(".ql-toolbar");n&&(o._removeMousedownListener=Object(R.addEventListener)(n,"mousedown",function(t){return t.preventDefault()}))});case 21:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),n.initializeFilestack=function(){var t=this;this.context.executeAction(V.a,{successHandler:function(e){e&&e.filesUploaded.length>0&&(e.filesUploaded.forEach(function(e){e.fullUrl=t.context.getImagesRootPath()+e.key}),t.props.onImageUpload(e.filesUploaded))},closeHandler:this.focusEditor,fetchDimensions:!1,options:{multiple:!0,src:"RichContentEditor",path:this.props.fileImageType}})},n.componentDidUpdate=function(t){this._quill&&(t.isEditing!==this.props.isEditing&&this.handleFocus(this.props.isEditing),t.placeholder!==this.props.placeholder&&L()(this._quill,"root.dataset.placeholder",this.props.placeholder))},n.componentWillUnmount=function(){if(S()(this._removeMousedownListener)&&this._removeMousedownListener(),this._quill){var t=this._quill.getModule("mention");t&&t.mentionContainer&&t.mentionContainer.remove&&t.mentionContainer.remove()}},n.handleSelectionChange=function(t,e,n){var r=!!t,i=!!e;r&&(this._latestRange=t),(!i&&r||"api"===n)&&this.scrollIntoView("selection-change",n),this.handleFocus(r),this.props.onSelectionChange(t,e,n)},n.getQuill=function(){return this._quill},n.insertEmbedAtSelection=function(t,e){var n=this._quill.getLength(),r=this._latestRange;r&&(n=r.index,0!==r.length&&this._quill.deleteText(n,r.length)),this._quill.insertEmbed(n,t,e),this._quill.hasFocus()?this._quill.setSelection({index:n+1,length:0}):this.scrollIntoView("selection-change","api")},n.onVideoUpload=function(t){var e=Object(z.formatVideoSrc)(t);e&&this.insertEmbedAtSelection("video",e)},n.handleFocus=function(t){void 0===t&&(t=!1),this._quill&&t!==this._quill.hasFocus()&&(t?this._quill.focus():this._quill.blur())},n.render=function(){var t=this,e=this.state.loaded?null:i()("div",{className:"ql-container ql-container--preload"},void 0,i()("div",{className:"ql-editor ql-blank","data-placeholder":this.props.placeholder,onClick:this.reinitializeQuill},void 0,i()("div",{},void 0,i()("br",{}))));return k.a.createElement("div",{className:F()("rich_content_editor",this.props.className,(this.props.isEditing||this._quill&&this._quill.hasFocus())&&"rich_content_editor--focused"),ref:function(e){return t._editorWrapper=e},style:this.props.style},e,k.a.createElement("div",{ref:function(e){return t._editor=e}}))},e}(x.Component),ht.contextTypes={executeAction:w.a.func,unsafeExecuteAction:w.a.func,getImagesRootPath:w.a.func,getUserAgent:w.a.func},ht.defaultProps={onSelectionChange:T.a,onTextChange:T.a,onImageUpload:T.a,toolbarOptions:[["bold","italic","strike"],[{list:"ordered"},{list:"bullet"},"link","image"]],formats:xt,disableToolbar:!1,plainText:!1,bindings:{},scrollOffset:100},ft=dt,b()(ft.prototype,"reinitializeQuill",[_.autobind],Object.getOwnPropertyDescriptor(ft.prototype,"reinitializeQuill"),ft.prototype),b()(ft.prototype,"initializeFilestack",[_.autobind],Object.getOwnPropertyDescriptor(ft.prototype,"initializeFilestack"),ft.prototype),b()(ft.prototype,"handleSelectionChange",[_.autobind],Object.getOwnPropertyDescriptor(ft.prototype,"handleSelectionChange"),ft.prototype),b()(ft.prototype,"getQuill",[_.autobind],Object.getOwnPropertyDescriptor(ft.prototype,"getQuill"),ft.prototype),b()(ft.prototype,"onVideoUpload",[_.autobind],Object.getOwnPropertyDescriptor(ft.prototype,"onVideoUpload"),ft.prototype),b()(ft.prototype,"handleFocus",[_.autobind],Object.getOwnPropertyDescriptor(ft.prototype,"handleFocus"),ft.prototype),ft);e.a=kt},1800:function(t,e,n){var r=Array.prototype.slice,i=n(1865),o=n(1866),s=t.exports=function(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?n.strict?t===e:t==e:function(t,e,n){var l,c;if(a(t)||a(e))return!1;if(t.prototype!==e.prototype)return!1;if(o(t))return!!o(e)&&(t=r.call(t),e=r.call(e),s(t,e,n));if(u(t)){if(!u(e))return!1;if(t.length!==e.length)return!1;for(l=0;l<t.length;l++)if(t[l]!==e[l])return!1;return!0}try{var p=i(t),f=i(e)}catch(t){return!1}if(p.length!=f.length)return!1;for(p.sort(),f.sort(),l=p.length-1;l>=0;l--)if(p[l]!=f[l])return!1;for(l=p.length-1;l>=0;l--)if(c=p[l],!s(t[c],e[c],n))return!1;return typeof t==typeof e}(t,e,n))};function a(t){return null==t}function u(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}},1801:function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===i.call(t)},u=function(t){if(!t||"[object Object]"!==i.call(t))return!1;var e,n=r.call(t,"constructor"),o=t.constructor&&t.constructor.prototype&&r.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!o)return!1;for(e in t);return void 0===e||r.call(t,e)},l=function(t,e){o&&"__proto__"===e.name?o(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},c=function(t,e){if("__proto__"===e){if(!r.call(t,e))return;if(s)return s(t,e).value}return t[e]};t.exports=function t(){var e,n,r,i,o,s,p=arguments[0],f=1,h=arguments.length,d=!1;for("boolean"==typeof p&&(d=p,p=arguments[1]||{},f=2),(null==p||"object"!=typeof p&&"function"!=typeof p)&&(p={});f<h;++f)if(null!=(e=arguments[f]))for(n in e)r=c(p,n),p!==(i=c(e,n))&&(d&&i&&(u(i)||(o=a(i)))?(o?(o=!1,s=r&&a(r)?r:[]):s=r&&u(r)?r:{},l(p,{name:n,newValue:t(d,s,i)})):void 0!==i&&l(p,{name:n,newValue:i}));return p}},1860:function(t,e){t.exports=function(t){return t&&t.length?t[0]:void 0}},1861:function(t,e,n){var r=n(1862),i=n(924);t.exports=function(t,e,n){return null==t?t:r(t,e,i(n))}},1862:function(t,e,n){var r=n(321),i=n(533);t.exports=function(t,e,n,o){return i(t,e,n(r(t,e)),o)}},1863:function(t,e,n){var r=n(1864),i=n(1800),o=n(1801),s=n(1867),a=String.fromCharCode(0),u=function(t){Array.isArray(t)?this.ops=t:null!=t&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]};u.prototype.insert=function(t,e){var n={};return 0===t.length?this:(n.insert=t,null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(n.attributes=e),this.push(n))},u.prototype.delete=function(t){return t<=0?this:this.push({delete:t})},u.prototype.retain=function(t,e){if(t<=0)return this;var n={retain:t};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(n.attributes=e),this.push(n)},u.prototype.push=function(t){var e=this.ops.length,n=this.ops[e-1];if(t=o(!0,{},t),"object"==typeof n){if("number"==typeof t.delete&&"number"==typeof n.delete)return this.ops[e-1]={delete:n.delete+t.delete},this;if("number"==typeof n.delete&&null!=t.insert&&(e-=1,"object"!=typeof(n=this.ops[e-1])))return this.ops.unshift(t),this;if(i(t.attributes,n.attributes)){if("string"==typeof t.insert&&"string"==typeof n.insert)return this.ops[e-1]={insert:n.insert+t.insert},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof n.retain)return this.ops[e-1]={retain:n.retain+t.retain},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this},u.prototype.chop=function(){var t=this.ops[this.ops.length-1];return t&&t.retain&&!t.attributes&&this.ops.pop(),this},u.prototype.filter=function(t){return this.ops.filter(t)},u.prototype.forEach=function(t){this.ops.forEach(t)},u.prototype.map=function(t){return this.ops.map(t)},u.prototype.partition=function(t){var e=[],n=[];return this.forEach(function(r){(t(r)?e:n).push(r)}),[e,n]},u.prototype.reduce=function(t,e){return this.ops.reduce(t,e)},u.prototype.changeLength=function(){return this.reduce(function(t,e){return e.insert?t+s.length(e):e.delete?t-e.delete:t},0)},u.prototype.length=function(){return this.reduce(function(t,e){return t+s.length(e)},0)},u.prototype.slice=function(t,e){t=t||0,"number"!=typeof e&&(e=1/0);for(var n=[],r=s.iterator(this.ops),i=0;i<e&&r.hasNext();){var o;i<t?o=r.next(t-i):(o=r.next(e-i),n.push(o)),i+=s.length(o)}return new u(n)},u.prototype.compose=function(t){var e=s.iterator(this.ops),n=s.iterator(t.ops),r=[],o=n.peek();if(null!=o&&"number"==typeof o.retain&&null==o.attributes){for(var a=o.retain;"insert"===e.peekType()&&e.peekLength()<=a;)a-=e.peekLength(),r.push(e.next());o.retain-a>0&&n.next(o.retain-a)}for(var l=new u(r);e.hasNext()||n.hasNext();)if("insert"===n.peekType())l.push(n.next());else if("delete"===e.peekType())l.push(e.next());else{var c=Math.min(e.peekLength(),n.peekLength()),p=e.next(c),f=n.next(c);if("number"==typeof f.retain){var h={};"number"==typeof p.retain?h.retain=c:h.insert=p.insert;var d=s.attributes.compose(p.attributes,f.attributes,"number"==typeof p.retain);if(d&&(h.attributes=d),l.push(h),!n.hasNext()&&i(l.ops[l.ops.length-1],h)){var g=new u(e.rest());return l.concat(g).chop()}}else"number"==typeof f.delete&&"number"==typeof p.retain&&l.push(f)}return l.chop()},u.prototype.concat=function(t){var e=new u(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e},u.prototype.diff=function(t,e){if(this.ops===t.ops)return new u;var n=[this,t].map(function(e){return e.map(function(n){if(null!=n.insert)return"string"==typeof n.insert?n.insert:a;throw new Error("diff() called "+(e===t?"on":"with")+" non-document")}).join("")}),o=new u,l=r(n[0],n[1],e),c=s.iterator(this.ops),p=s.iterator(t.ops);return l.forEach(function(t){for(var e=t[1].length;e>0;){var n=0;switch(t[0]){case r.INSERT:n=Math.min(p.peekLength(),e),o.push(p.next(n));break;case r.DELETE:n=Math.min(e,c.peekLength()),c.next(n),o.delete(n);break;case r.EQUAL:n=Math.min(c.peekLength(),p.peekLength(),e);var a=c.next(n),u=p.next(n);i(a.insert,u.insert)?o.retain(n,s.attributes.diff(a.attributes,u.attributes)):o.push(u).delete(n)}e-=n}}),o.chop()},u.prototype.eachLine=function(t,e){e=e||"\n";for(var n=s.iterator(this.ops),r=new u,i=0;n.hasNext();){if("insert"!==n.peekType())return;var o=n.peek(),a=s.length(o)-n.peekLength(),l="string"==typeof o.insert?o.insert.indexOf(e,a)-a:-1;if(l<0)r.push(n.next());else if(l>0)r.push(n.next(l));else{if(!1===t(r,n.next(1).attributes||{},i))return;i+=1,r=new u}}r.length()>0&&t(r,{},i)},u.prototype.transform=function(t,e){if(e=!!e,"number"==typeof t)return this.transformPosition(t,e);for(var n=s.iterator(this.ops),r=s.iterator(t.ops),i=new u;n.hasNext()||r.hasNext();)if("insert"!==n.peekType()||!e&&"insert"===r.peekType())if("insert"===r.peekType())i.push(r.next());else{var o=Math.min(n.peekLength(),r.peekLength()),a=n.next(o),l=r.next(o);if(a.delete)continue;l.delete?i.push(l):i.retain(o,s.attributes.transform(a.attributes,l.attributes,e))}else i.retain(s.length(n.next()));return i.chop()},u.prototype.transformPosition=function(t,e){e=!!e;for(var n=s.iterator(this.ops),r=0;n.hasNext()&&r<=t;){var i=n.peekLength(),o=n.peekType();n.next(),"delete"!==o?("insert"===o&&(r<t||!e)&&(t+=i),r+=i):t-=Math.min(i,t-r)}return t},t.exports=u},1864:function(t,e){var n=-1,r=1,i=0;function o(t,e,l){if(t==e)return t?[[i,t]]:[];(l<0||t.length<l)&&(l=null);var p=a(t,e),f=t.substring(0,p);p=u(t=t.substring(p),e=e.substring(p));var h=t.substring(t.length-p),d=function(t,e){var l;if(!t)return[[r,e]];if(!e)return[[n,t]];var c=t.length>e.length?t:e,p=t.length>e.length?e:t,f=c.indexOf(p);if(-1!=f)return l=[[r,c.substring(0,f)],[i,p],[r,c.substring(f+p.length)]],t.length>e.length&&(l[0][0]=l[2][0]=n),l;if(1==p.length)return[[n,t],[r,e]];var h=function(t,e){var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||2*r.length<n.length)return null;function i(t,e,n){for(var r,i,o,s,l=t.substring(n,n+Math.floor(t.length/4)),c=-1,p="";-1!=(c=e.indexOf(l,c+1));){var f=a(t.substring(n),e.substring(c)),h=u(t.substring(0,n),e.substring(0,c));p.length<h+f&&(p=e.substring(c-h,c)+e.substring(c,c+f),r=t.substring(0,n-h),i=t.substring(n+f),o=e.substring(0,c-h),s=e.substring(c+f))}return 2*p.length>=t.length?[r,i,o,s,p]:null}var o,s,l,c,p,f=i(n,r,Math.ceil(n.length/4)),h=i(n,r,Math.ceil(n.length/2));if(!f&&!h)return null;o=h?f&&f[4].length>h[4].length?f:h:f;t.length>e.length?(s=o[0],l=o[1],c=o[2],p=o[3]):(c=o[0],p=o[1],s=o[2],l=o[3]);var d=o[4];return[s,l,c,p,d]}(t,e);if(h){var d=h[0],g=h[1],b=h[2],m=h[3],v=h[4],y=o(d,b),w=o(g,m);return y.concat([[i,v]],w)}return function(t,e){for(var i=t.length,o=e.length,a=Math.ceil((i+o)/2),u=a,l=2*a,c=new Array(l),p=new Array(l),f=0;f<l;f++)c[f]=-1,p[f]=-1;c[u+1]=0,p[u+1]=0;for(var h=i-o,d=h%2!=0,g=0,b=0,m=0,v=0,y=0;y<a;y++){for(var w=-y+g;w<=y-b;w+=2){for(var x=u+w,k=(A=w==-y||w!=y&&c[x-1]<c[x+1]?c[x+1]:c[x-1]+1)-w;A<i&&k<o&&t.charAt(A)==e.charAt(k);)A++,k++;if(c[x]=A,A>i)b+=2;else if(k>o)g+=2;else if(d){var _=u+h-w;if(_>=0&&_<l&&-1!=p[_]){var O=i-p[_];if(A>=O)return s(t,e,A,k)}}}for(var j=-y+m;j<=y-v;j+=2){for(var _=u+j,E=(O=j==-y||j!=y&&p[_-1]<p[_+1]?p[_+1]:p[_-1]+1)-j;O<i&&E<o&&t.charAt(i-O-1)==e.charAt(o-E-1);)O++,E++;if(p[_]=O,O>i)v+=2;else if(E>o)m+=2;else if(!d){var x=u+h-j;if(x>=0&&x<l&&-1!=c[x]){var A=c[x],k=u+A-x;if(A>=(O=i-O))return s(t,e,A,k)}}}}return[[n,t],[r,e]]}(t,e)}(t=t.substring(0,t.length-p),e=e.substring(0,e.length-p));return f&&d.unshift([i,f]),h&&d.push([i,h]),function t(e){e.push([i,""]);var o=0;var s=0;var l=0;var c="";var p="";var f;for(;o<e.length;)switch(e[o][0]){case r:l++,p+=e[o][1],o++;break;case n:s++,c+=e[o][1],o++;break;case i:s+l>1?(0!==s&&0!==l&&(0!==(f=a(p,c))&&(o-s-l>0&&e[o-s-l-1][0]==i?e[o-s-l-1][1]+=p.substring(0,f):(e.splice(0,0,[i,p.substring(0,f)]),o++),p=p.substring(f),c=c.substring(f)),0!==(f=u(p,c))&&(e[o][1]=p.substring(p.length-f)+e[o][1],p=p.substring(0,p.length-f),c=c.substring(0,c.length-f))),0===s?e.splice(o-l,s+l,[r,p]):0===l?e.splice(o-s,s+l,[n,c]):e.splice(o-s-l,s+l,[n,c],[r,p]),o=o-s-l+(s?1:0)+(l?1:0)+1):0!==o&&e[o-1][0]==i?(e[o-1][1]+=e[o][1],e.splice(o,1)):o++,l=0,s=0,c="",p=""}""===e[e.length-1][1]&&e.pop();var h=!1;o=1;for(;o<e.length-1;)e[o-1][0]==i&&e[o+1][0]==i&&(e[o][1].substring(e[o][1].length-e[o-1][1].length)==e[o-1][1]?(e[o][1]=e[o-1][1]+e[o][1].substring(0,e[o][1].length-e[o-1][1].length),e[o+1][1]=e[o-1][1]+e[o+1][1],e.splice(o-1,1),h=!0):e[o][1].substring(0,e[o+1][1].length)==e[o+1][1]&&(e[o-1][1]+=e[o+1][1],e[o][1]=e[o][1].substring(e[o+1][1].length)+e[o+1][1],e.splice(o+1,1),h=!0)),o++;h&&t(e)}(d),null!=l&&(d=function(t,e){var r=function(t,e){if(0===e)return[i,t];for(var r=0,o=0;o<t.length;o++){var s=t[o];if(s[0]===n||s[0]===i){var a=r+s[1].length;if(e===a)return[o+1,t];if(e<a){t=t.slice();var u=e-r,l=[s[0],s[1].slice(0,u)],c=[s[0],s[1].slice(u)];return t.splice(o,1,l,c),[o+1,t]}r=a}}throw new Error("cursor_pos is out of bounds!")}(t,e),o=r[1],s=r[0],a=o[s],u=o[s+1];if(null==a)return t;if(a[0]!==i)return t;if(null!=u&&a[1]+u[1]===u[1]+a[1])return o.splice(s,2,u,a),c(o,s,2);if(null!=u&&0===u[1].indexOf(a[1])){o.splice(s,2,[u[0],a[1]],[0,a[1]]);var l=u[1].slice(a[1].length);return l.length>0&&o.splice(s+2,0,[u[0],l]),c(o,s,3)}return t}(d,l)),d=function(t){for(var e=!1,o=function(t){return t.charCodeAt(0)>=56320&&t.charCodeAt(0)<=57343},s=2;s<t.length;s+=1)t[s-2][0]===i&&((a=t[s-2][1]).charCodeAt(a.length-1)>=55296&&a.charCodeAt(a.length-1)<=56319)&&t[s-1][0]===n&&o(t[s-1][1])&&t[s][0]===r&&o(t[s][1])&&(e=!0,t[s-1][1]=t[s-2][1].slice(-1)+t[s-1][1],t[s][1]=t[s-2][1].slice(-1)+t[s][1],t[s-2][1]=t[s-2][1].slice(0,-1));var a;if(!e)return t;for(var u=[],s=0;s<t.length;s+=1)t[s][1].length>0&&u.push(t[s]);return u}(d)}function s(t,e,n,r){var i=t.substring(0,n),s=e.substring(0,r),a=t.substring(n),u=e.substring(r),l=o(i,s),c=o(a,u);return l.concat(c)}function a(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;n<i;)t.substring(o,i)==e.substring(o,i)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i}function u(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;n<i;)t.substring(t.length-i,t.length-o)==e.substring(e.length-i,e.length-o)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i}var l=o;function c(t,e,n){for(var r=e+n-1;r>=0&&r>=e-1;r--)if(r+1<t.length){var i=t[r],o=t[r+1];i[0]===o[1]&&t.splice(r,2,[i[0],i[1]+o[1]])}return t}l.INSERT=r,l.DELETE=n,l.EQUAL=i,t.exports=l},1865:function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n},1866:function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?r:i).supported=r,e.unsupported=i},1867:function(t,e,n){var r=n(1800),i=n(1801),o={attributes:{compose:function(t,e,n){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var r=i(!0,{},e);for(var o in n||(r=Object.keys(r).reduce(function(t,e){return null!=r[e]&&(t[e]=r[e]),t},{})),t)void 0!==t[o]&&void 0===e[o]&&(r[o]=t[o]);return Object.keys(r).length>0?r:void 0},diff:function(t,e){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var n=Object.keys(t).concat(Object.keys(e)).reduce(function(n,i){return r(t[i],e[i])||(n[i]=void 0===e[i]?null:e[i]),n},{});return Object.keys(n).length>0?n:void 0},transform:function(t,e,n){if("object"!=typeof t)return e;if("object"==typeof e){if(!n)return e;var r=Object.keys(e).reduce(function(n,r){return void 0===t[r]&&(n[r]=e[r]),n},{});return Object.keys(r).length>0?r:void 0}}},iterator:function(t){return new s(t)},length:function(t){return"number"==typeof t.delete?t.delete:"number"==typeof t.retain?t.retain:"string"==typeof t.insert?t.insert.length:1}};function s(t){this.ops=t,this.index=0,this.offset=0}s.prototype.hasNext=function(){return this.peekLength()<1/0},s.prototype.next=function(t){t||(t=1/0);var e=this.ops[this.index];if(e){var n=this.offset,r=o.length(e);if(t>=r-n?(t=r-n,this.index+=1,this.offset=0):this.offset+=t,"number"==typeof e.delete)return{delete:t};var i={};return e.attributes&&(i.attributes=e.attributes),"number"==typeof e.retain?i.retain=t:"string"==typeof e.insert?i.insert=e.insert.substr(n,t):i.insert=e.insert,i}return{retain:1/0}},s.prototype.peek=function(){return this.ops[this.index]},s.prototype.peekLength=function(){return this.ops[this.index]?o.length(this.ops[this.index])-this.offset:1/0},s.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},s.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var t=this.offset,e=this.index,n=this.next(),r=this.ops.slice(this.index);return this.offset=t,this.index=e,[n].concat(r)}return[]},t.exports=o}}]);